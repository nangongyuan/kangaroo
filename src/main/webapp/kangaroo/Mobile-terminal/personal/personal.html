<link rel="stylesheet" href="../personal/css/area.css">
<link rel="stylesheet" href="../personal/css/personal.css">

<div class="personal-content" style="background:#e8e8e8;padding:0">
    <div style="background:rgb(252, 183, 72);height:100px;border:0">

        <div class="col-xs-2" onclick="showAvatarModel()">
            <img src='' id="headpic" style="width:70px;height:70px;margin:15px;margin-left:2px;border: 1px solid rgba(253, 253, 253, 0.589);border-radius:5px;">
        </div>

        <div class="col-xs-offset-1 col-xs-8">
            <span style="color:#FFF;font-size:18px;position:relative;top:40px;" id="name">

            </span>
            <p style="color:#FFF;font-size:15px;margin-top:35px;" id="uid">
                uid:
            </p>
        </div>

    </div>

    <div class="weui-cells">
        <a class="weui-cell weui-cell_access" href="javascript:;" id="PerGenderButton">
            <div class="weui-cell__bd">
                性别
            </div>
            <div class="weui-cell__ft">
                <span id="Gender" style="margin-right:10px;">男</span>
            </div>
        </a>
        <a class="weui-cell weui-cell_access" href="javascript:;" id="PerAreaButton">
            <div class="weui-cell__bd">
                地区
            </div>
            <div class="weui-cell__ft">
                <span class="information" style="margin-right:10px;" id="Area"></span>
                <script src="../personal/js/area.js"></script>
            </div>
        </a>
        <a class="weui-cell weui-cell_access" href="javascript:;" onclick="personal_reserve()">
            <div class="weui-cell__bd">
                我预订的活动
            </div>
            <div class="weui-cell__ft">
            </div>
        </a>
        <a class="weui-cell weui-cell_access" href="javascript:;" onclick="personal_publish()">
            <div class="weui-cell__bd">
                我发布的活动
            </div>
            <div class="weui-cell__ft">
            </div>
        </a>
        <a class="weui-cell weui-cell_access" href="javascript:;" onclick="personal_history()">
            <div class="weui-cell__bd">
                活动历史记录
            </div>
            <div class="weui-cell__ft">
            </div>
        </a>

        <button type="button" class="btn btn-defalut btn-block" style="border-radius:0;background-color:#FFF;outline: none;" onclick="user_out()">退出登录</button>

    </div>

    <div>
        <div style="position:relative;top:20px;">
            <div style="outline:none;height:-webkit-fill-available;border-radius:0;border:0;text-align:left;background:#FFF;border-bottom: 1px solid #e8e8e8;border-top: 1px solid #e8e8e8;"
                id="PerHobbyButton">
                <span style="font-size:16px;position:relative;top:9px;left:15px;">兴趣</span>

                <div class="changeone" id="J_List"></div>
            </div>
        </div>
    </div>


</div>

<div class="modal fade" id="GenderModel" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style="border:0">
    <div class="modal-dialog" style="width:270px">
        <div class="modal-content">
            <br>
            <h4 class="modal-title" id="MessageModelTitle">性别</h4>
            <div class="modal-body">
                <span id="errorMessage"></span>
            </div>
            <div class="modal-footer" style="padding:0">

            </div>
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div>

<!-- 选择头像模态框（Modal） -->
<input type="file" name="select_ava" accept="image/*" id="select_ava" style="display:none" />


<div id="personal-history-div">
    <img src="../friend/img/friend-infortion-back.png" class="personal-history-back">
    <div class="personal-history-head">
        历史记录
    </div>

    <div class="weui-cells personal-history-content">

    </div>
</div>

<div id="personal-reserve-div">
    <img src="../friend/img/friend-infortion-back.png" class="personal-reserve-back">
    <div class="personal-reserve-head">
        预订的活动
    </div>

    <div class="weui-cells personal-reserve-content">

    </div>
</div>

<div id="personal-publish-div">
    <img src="../friend/img/friend-infortion-back.png" class="personal-publish-back">

    <div class="publish-content">
        <div class="weui-cells personal-publish-content">

        </div>
    </div>

    <div class="publish-head">
        我发布的活动
    </div>

    <div class="weui-grids">
        <a class="weui-grid js_grid" onclick="load_publish_activity(this)" id='publish-notrun'>
            <div class="weui-grid__icon">
                <img src="../personal/img/not-star-activity.png" alt="">
            </div>
            <p class="weui-grid__label">
                未开始的活动
            </p>
        </a>
        <a class="weui-grid js_grid" onclick="load_publish_activity(this)" id='publish-run'>
            <div class="weui-grid__icon">
                <img src="../personal/img/run-activity.png" alt="">
            </div>
            <p class="weui-grid__label">
                正在进行的活动
            </p>
        </a>
        <a class="weui-grid js_grid" onclick="load_publish_activity(this)" id='publish-end'>
            <div class="weui-grid__icon">
                <img src="../personal/img/end-activity.png" alt="">
            </div>
            <p class="weui-grid__label">
                已结束的活动
            </p>
        </a>
    </div>

</div>

<script src="https://cdn.bootcss.com/jquery-weui/1.2.0/js/city-picker.js"></script>
<script src="../personal/js/personal.js"></script>
<script src="../personal/js/update-activity.js"></script>
<script src="../personal/js/hobby.js"></script>

<script>
    $(function () {
        ShowHobby();
    })

    function showAvatarModel() {
        $.modal({
            title: "选择头像",
            text: "<div class='modal-footer ' style='padding:0' id='Avatarbody'>" +
                "<ul>" +
                "</ul>" + 
                "</div>"
                ,
            buttons: [{
                    text: "确认",
                    onClick: function () {
                        console.log(Avatarsrc);
                        if (Avatarsrc != "") {
                            $("#headpic").attr('src', Avatarsrc);
                        } else {
                            return false;
                        }

                        headpic = Avatarsrc;
                        update();
                        $.closeModal();

                        index = 0;
                    }
                },
                {
                    text: "自定义",
                    onClick: function () {
                        console.log(2)
                        $("#select_ava").trigger("click");
                    }
                },
                {
                    text: "取消",
                    className: "default",
                    onClick: function () {
                        $.closeModal();
                    }
                },
            ],
            autoClose: false,
        });
        

        for (let i = 0; i < 45; i++) {
            $("#Avatarbody ul").append(
                "<li>" +
                "<img src=''/>" +
                "</li>"
            )
        }

        load_avatar();
    }


    $('#PerGenderButton').click(function () {
        $.modal({
            title: "选择性别",
            text: "<a href='javascript:;' class='weui-btn weui-btn_plain-default' style='border:0;border-top:1px solid #e8e8e8'  onclick='ManButton()'>男</a>" +
                "<a href='javascript:;' class='weui-btn weui-btn_plain-default' style='border:0;' onclick='WomanButton()'>女</a>",
            buttons: [{
                text: "取消",
                className: "default",
                onClick: function () {
                    $.closeModal();
                }
            }, ]
        });
    })

    function ManButton() {
        gender = "男";
        update();
        $.closeModal();
    }


    function WomanButton() {
        gender = "女";
        update();
        $.closeModal();
    }
</script>