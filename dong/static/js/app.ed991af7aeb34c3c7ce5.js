webpackJsonp([1],{AQDO:function(t,e){},I8Qr:function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r={};a.d(r,"curNavActive",function(){return Z}),a.d(r,"curBread",function(){return tt}),a.d(r,"getUsrName",function(){return et});var s=a("/5sW"),i={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var n=a("VU/8")({name:"App"},i,!1,function(t){a("l9mT")},null,null).exports,o=a("/ocq"),l=a("Xxa5"),c=a.n(l),d=a("exGp"),u=a.n(d),p=a("Dd8w"),v=a.n(p),m=a("//Fk"),f=a.n(m),g=a("mtWM"),b=a.n(g),h=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=new URLSearchParams;for(var s in e)e.hasOwnProperty(s)&&r.append(s,e[s]);return new f.a(function(e,s){b.a.post(t,r).then(function(t){e(a?t:t.data)}).catch(function(t){s(t)})})},_=a("NYxO"),y={methods:v()({},Object(_.c)({setUsrName:"setUsrName"}),{login:function(){var t=this;return u()(c.a.mark(function e(){var a,r,s,i;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==t.uname&&""!==t.pwd&&""!==t.code){e.next=4;break}return t.showTips=!0,t.tips="用户名、密码或验证码不能为空",e.abrupt("return");case 4:return e.next=6,t.$http.get("/admins/login",{params:{user:t.uname,password:t.pwd,verifiCode:t.code}});case 6:if(a=e.sent,r=a.data,r.data,s=r.success,i=r.msg,!s){e.next=15;break}return t.$router.push("/backstage"),t.setUsrName(t.uname),e.abrupt("return");case 15:t.showTips=!0,t.tips=i,t.refreshcode();case 18:case"end":return e.stop()}},e,t)}))()},refreshcode:function(){this.codesrc=this.basecodeurl+"?"+parseInt(19999*Math.random()).toString()}}),data:function(){return{showTips:!1,uname:"",pwd:"",code:"",tips:"",basecodeurl:"/admins/verification",codesrc:"/admins/verification"}}},x={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"login"}},[a("div",{attrs:{id:"login-form"}},[a("div",{staticClass:"title"},[t._v("袋鼠后台管理系统")]),t._v(" "),t.showTips?a("div",{staticClass:"tips"},[t._v("\n      "+t._s(t.tips)+"\n    ")]):t._e(),t._v(" "),a("div",{staticClass:"item"},[a("el-input",{attrs:{type:"text",placeholder:"用户名"},model:{value:t.uname,callback:function(e){t.uname=e},expression:"uname"}})],1),t._v(" "),a("div",{staticClass:"item"},[a("el-input",{attrs:{type:"password",placeholder:"密码"},model:{value:t.pwd,callback:function(e){t.pwd=e},expression:"pwd"}})],1),t._v(" "),a("div",{staticClass:"item"},[a("el-input",{staticStyle:{width:"60%",float:"left"},attrs:{type:"text",placeholder:"验证码"},model:{value:t.code,callback:function(e){t.code=e},expression:"code"}}),t._v(" "),a("div",{staticStyle:{float:"left",width:"40%",height:"40px"}},[a("img",{staticStyle:{width:"100%",height:"100%"},attrs:{src:t.codesrc,alt:""},on:{click:t.refreshcode}})])],1),t._v(" "),a("div",{staticStyle:{clear:"both"}}),t._v(" "),a("div",{staticClass:"item",staticStyle:{"margin-top":"30px"}},[a("el-button",{attrs:{type:"primary"},on:{click:t.login}},[t._v("登陆")])],1)])])},staticRenderFns:[]};var w=a("VU/8")(y,x,!1,function(t){a("WYpt")},"data-v-5d0478ea",null).exports,k={methods:v()({},Object(_.c)({setUsrName:"setUsrName"}),{logout:function(){var t=this;return u()(c.a.mark(function e(){var a,r,s;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h("/users/logout");case 2:if(a=e.sent,r=a.success,s=a.msg,a.data,!r){e.next=9;break}return t.$router.replace("/login"),e.abrupt("return");case 9:t.$notify.error({title:"错误",message:s});case 10:case"end":return e.stop()}},e,t)}))()}}),mounted:function(){var t=this;return u()(c.a.mark(function e(){return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}},e,t)}))()},computed:v()({},Object(_.b)(["getUsrName"]))},D={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("header",[a("div",{staticClass:"content"},[a("div",{staticClass:"logo"},[t._v("\n      袋鼠互动\n    ")]),t._v(" "),a("div",{staticClass:"uinfo"},[a("div",{staticClass:"uname"},[a("i",{staticClass:"fa fa-user"}),t._v(" "+t._s(t.getUsrName)+"\n      ")]),t._v(" "),a("div",{staticClass:"logout",on:{click:t.logout}},[a("i",{staticClass:"fa fa-sign-out"}),t._v(" 退出\n      ")])])])])},staticRenderFns:[]};var C=a("VU/8")(k,D,!1,function(t){a("vmb/")},"data-v-c03fa32e",null).exports,T={methods:{goto:function(t){this.$router.push(t)}},computed:v()({},Object(_.b)(["curNavActive"]))},A={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("nav",[a("el-row",{staticClass:"tac"},[a("el-col",{attrs:{span:24}},[a("el-menu",{attrs:{"default-active":t.curNavActive}},[a("el-menu-item",{attrs:{index:"1"},on:{click:function(e){t.goto("/backstage/actmgr")}}},[a("i",{staticClass:"fa fa-gamepad"}),t._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[t._v("活动管理")])]),t._v(" "),a("el-menu-item",{attrs:{index:"2"},on:{click:function(e){t.goto("/backstage/usermgr")}}},[a("i",{staticClass:"fa fa-users"}),t._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[t._v("用户管理")])])],1)],1)],1)],1)},staticRenderFns:[]},$=a("VU/8")(T,A,!1,null,null,null).exports,S={data:function(){return{bodyHeight:document.documentElement.clientHeight-60}},computed:v()({},Object(_.b)(["curBread"])),components:{NavHeader:C,Naver:$},mounted:function(){var t=this;window.addEventListener("resize",function(){t.bodyHeight=document.documentElement.clientHeight-60})}},N={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"backstage"}},[a("nav-header"),t._v(" "),a("div",{staticClass:"body"},[a("div",{staticClass:"nav"},[a("Naver")],1),t._v(" "),a("div",{staticClass:"container",style:{height:t.bodyHeight+"px"}},[a("el-card",{staticClass:"box-card"},[a("el-breadcrumb",{attrs:{separator:"/"}},t._l(t.curBread,function(e,r){return a("el-breadcrumb-item",{key:r,attrs:{to:{path:e.path}}},[t._v(t._s(e.text))])}))],1),t._v(" "),a("router-view")],1)])],1)},staticRenderFns:[]};var F=a("VU/8")(S,N,!1,function(t){a("NigV")},"data-v-1744cacf",null).exports,P=[{path:"/backstage/usermgr",text:"用户管理"}],U=[{path:"/backstage/actmgr",text:"活动管理"}],I=[{path:"/backstage/usermgr",text:"用户管理"},{path:"/a/n",text:"个人信息"}],L=[{path:"/backstage/actmgr",text:"活动管理"},{path:"/",text:"活动详情"}],O={data:function(){return{tableData:[],total:0,loading:!1,addData:{name:"",password:"",sex:"男",area:"",phone:"",headpic:"default0.png",locked:"否",remark:"",type:"普通用户"}}},methods:v()({},Object(_.c)({setNavActive:"setNavActive",setCurBread:"setCurBread"}),{addUser:function(){var t=this;return u()(c.a.mark(function e(){var a,r,s,i;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(a=v()({},t.addData)).type="普通用户"===a.type?1:0,a.locked="是"===a.locked?1:0,e.next=5,h("/admins",a);case 5:if(r=e.sent,r.data,s=r.success,i=r.msg,!s){e.next=16;break}return t.$notify({title:"成功",message:i,type:"success"}),t.addData.name="",t.addData.area="",t.addData.remark="",t.phone="",e.abrupt("return");case 16:t.$notify.error({title:"错误",message:i});case 17:case"end":return e.stop()}},e,t)}))()},del:function(t){var e=this;return u()(c.a.mark(function a(){var r,s,i;return c.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,h("/admins/"+t+"/del");case 2:if(r=a.sent,r.data,s=r.success,i=r.msg,!s){a.next=10;break}return e.$notify({title:"成功",message:i,type:"success"}),e.tableData.forEach(function(a,r){a.id===t&&e.tableData.splice(r,1)}),a.abrupt("return");case 10:e.$notify.error({title:"错误",message:i});case 11:case"end":return a.stop()}},a,e)}))()},getAllUser:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return u()(c.a.mark(function a(){var r,s,i,n;return c.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t.loading=!0,a.next=3,t.$http.get("/admins",{params:{pagenum:e,pagesize:20}});case 3:if(r=a.sent,s=r.data,i=s.success,n=s.data,s.msg,!i){a.next=13;break}return t.tableData=n.rows,t.total=n.total,t.loading=!1,a.abrupt("return");case 13:t.loading=!1;case 14:case"end":return a.stop()}},a,t)}))()},setPage:function(t){this.getAllUser(t)},detail:function(t){this.$router.push("/backstage/usermgr/"+t)}}),mounted:function(){this.setNavActive("2"),this.setCurBread(P),this.getAllUser()}},H={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{attrs:{id:"usermgr"}},[a("div",{staticClass:"empty"}),t._v(" "),a("el-tabs",{attrs:{"tab-position":"left"}},[a("el-tab-pane",{attrs:{label:"用户管理"}},[a("el-card",{staticClass:"box-card",attrs:{"body-style":"padding: 0;"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("用户列表")])]),t._v(" "),a("div",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%",border:"0 none"},attrs:{data:t.tableData,border:""}},[a("el-table-column",{attrs:{prop:"name",label:"用户名",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"area",label:"地区",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"phone",label:"手机"}}),t._v(" "),a("el-table-column",{attrs:{prop:"sex",label:"性别"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){t.detail(e.row.id)}}},[t._v("详情")]),t._v(" "),a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(a){t.del(e.row.id)}}},[t._v("删除")])]}}])})],1),t._v(" "),a("div",{staticClass:"block",staticStyle:{"text-align":"center"}},[a("el-pagination",{attrs:{"current-page":1,"page-size":20,layout:"total, prev, pager, next, jumper",total:t.total},on:{"current-change":t.setPage}})],1)],1)])],1),t._v(" "),a("el-tab-pane",{attrs:{label:"添加用户"}},[a("el-form",{ref:"form",attrs:{model:t.addData,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"姓名"}},[a("el-input",{model:{value:t.addData.name,callback:function(e){t.$set(t.addData,"name",e)},expression:"addData.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"密码"}},[a("el-input",{model:{value:t.addData.password,callback:function(e){t.$set(t.addData,"password",e)},expression:"addData.password"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"地区"}},[a("el-input",{model:{value:t.addData.area,callback:function(e){t.$set(t.addData,"area",e)},expression:"addData.area"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"手机"}},[a("el-input",{model:{value:t.addData.phone,callback:function(e){t.$set(t.addData,"phone",e)},expression:"addData.phone"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{model:{value:t.addData.remark,callback:function(e){t.$set(t.addData,"remark",e)},expression:"addData.remark"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"性别"}},[a("el-radio-group",{model:{value:t.addData.sex,callback:function(e){t.$set(t.addData,"sex",e)},expression:"addData.sex"}},[a("el-radio",{attrs:{label:"男",value:"0"}}),t._v(" "),a("el-radio",{attrs:{label:"女",value:"1"}})],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"用户类型"}},[a("el-radio-group",{model:{value:t.addData.type,callback:function(e){t.$set(t.addData,"type",e)},expression:"addData.type"}},[a("el-radio",{attrs:{label:"普通用户"}}),t._v(" "),a("el-radio",{attrs:{label:"管理员"}})],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"是否锁定"}},[a("el-radio-group",{model:{value:t.addData.locked,callback:function(e){t.$set(t.addData,"locked",e)},expression:"addData.locked"}},[a("el-radio",{attrs:{label:"是"}}),t._v(" "),a("el-radio",{attrs:{label:"否"}})],1)],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.addUser}},[t._v("立即创建")])],1)],1)],1)],1)],1)},staticRenderFns:[]},z=a("VU/8")(O,H,!1,null,null,null).exports,R={data:function(){return{addData:{tagName:""},showAddForm:!1,total:0,actList:[],loading:!1,tags:[],addTagData:"",tagLoading:!1,showUpdateTagForm:!1,curUpdateTag:{id:0,name:""}}},methods:v()({},Object(_.c)({setNavActive:"setNavActive",setCurBread:"setCurBread"}),{delact:function(t){var e=this;return u()(c.a.mark(function a(){var r,s,i;return c.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,h("/activity/"+t+"/del");case 2:if(r=a.sent,s=r.success,r.data,i=r.msg,!s){a.next=10;break}return e.$notify({title:"成功",message:i,type:"success"}),e.actList.forEach(function(a,r){a.id===t&&e.actList.splice(r,1)}),a.abrupt("return");case 10:e.$notify.error({title:"错误",message:i});case 11:case"end":return a.stop()}},a,e)}))()},setpage:function(t){this.getAllAct(t)},detail:function(t){this.$router.push("/backstage/actmgr/"+t)},getAllAct:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return u()(c.a.mark(function a(){var r,s,i,n,o;return c.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t.loading=!0,a.next=3,t.$http.get("/activity/type/0",{params:{pagenum:e,pagesize:20}});case 3:if(r=a.sent,s=r.data,i=s.success,n=s.data,o=s.msg,!i){a.next=13;break}return t.actList=n.rows,t.loading=!1,t.total=n.total,a.abrupt("return");case 13:t.$notify.error({title:"错误",message:o}),t.loading=!1;case 15:case"end":return a.stop()}},a,t)}))()},getAllTags:function(){var t=this;return u()(c.a.mark(function e(){var a,r,s,i;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.tagLoading=!0,e.next=3,t.$http.get("/activity-type");case 3:if(a=e.sent,r=a.data,s=r.success,i=r.data,r.msg,!s){e.next=12;break}return t.tags=i,t.tagLoading=!1,e.abrupt("return");case 12:t.tagLoading=!1;case 13:case"end":return e.stop()}},e,t)}))()},delTag:function(t){var e=this;return u()(c.a.mark(function a(){var r,s,i;return c.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,h("/activity-type/"+t.id+"/del");case 2:if(r=a.sent,s=r.success,r.data,i=r.msg,!s){a.next=9;break}return e.tags.forEach(function(a,r){a.id===t.id&&e.tags.splice(r,1)}),a.abrupt("return");case 9:e.$notify.error({title:"错误",message:i});case 10:case"end":return a.stop()}},a,e)}))()},addTag:function(){var t=this;return u()(c.a.mark(function e(){var a,r,s,i;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.tags.push({name:t.addTagData}),e.next=3,h("/activity-type",{name:t.addTagData});case 3:if(a=e.sent,r=a.success,s=a.data,i=a.msg,console.log(s),!r){e.next=11;break}return t.getAllTags(),e.abrupt("return");case 11:t.$notify.error({title:"错误",message:i});case 12:case"end":return e.stop()}},e,t)}))()},updateTagName:function(t){var e=this;return u()(c.a.mark(function a(){return c.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:e.curUpdateTag=v()({},t),e.showUpdateTagForm=!0;case 2:case"end":return a.stop()}},a,e)}))()},updateTag:function(){var t=this;return u()(c.a.mark(function e(){var a,r,s;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h("/activity-type/put",t.curUpdateTag);case 2:if(a=e.sent,r=a.success,a.data,s=a.msg,!r){e.next=9;break}return t.$notify({title:"成功",message:s,type:"success"}),e.abrupt("return");case 9:t.$notify.error({title:"错误",message:s});case 10:case"end":return e.stop()}},e,t)}))()}}),mounted:function(){this.setNavActive("1"),this.setCurBread(U),this.getAllAct(),this.getAllTags()}},V={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{attrs:{id:"actmgr"}},[a("div",{staticClass:"empty"}),t._v(" "),a("el-tabs",{attrs:{"tab-position":"left"}},[a("el-tab-pane",{attrs:{label:"活动管理"}},[a("el-card",{staticClass:"box-card",attrs:{"body-style":"padding: 0;"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("活动管理")])]),t._v(" "),a("div",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%",border:"0 none"},attrs:{data:t.actList,border:""}},[a("el-table-column",{attrs:{prop:"name",label:"活动名"}}),t._v(" "),a("el-table-column",{attrs:{prop:"typeName",label:"类型"}}),t._v(" "),a("el-table-column",{attrs:{prop:"max",label:"人数"}}),t._v(" "),a("el-table-column",{attrs:{prop:"area",label:"地区"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){t.detail(e.row.id)}}},[t._v("详情")]),t._v(" "),a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(a){t.delact(e.row.id)}}},[t._v("删除")])]}}])})],1),t._v(" "),a("div",{staticClass:"block",staticStyle:{"text-align":"center"}},[a("el-pagination",{attrs:{"current-page":1,"page-size":20,layout:"total, prev, pager, next, jumper",total:t.total},on:{"current-change":t.setpage}})],1)],1)])],1),t._v(" "),a("el-tab-pane",{attrs:{label:"标签管理"}},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("标签管理")])]),t._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.tagLoading,expression:"tagLoading"}]},[a("el-row",[a("el-col",{attrs:{span:20}},[a("div",{staticClass:"grid-content"},[a("el-input",{attrs:{placeholder:"新标签名"},model:{value:t.addTagData,callback:function(e){t.addTagData=e},expression:"addTagData"}})],1)]),t._v(" "),a("el-col",{attrs:{span:4}},[a("div",{staticClass:"grid-content"},[a("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary"},on:{click:t.addTag}},[t._v("添加")])],1)])],1),t._v(" "),a("div",{staticClass:"empty"}),t._v(" "),a("div",t._l(t.tags,function(e){return a("el-tag",{key:e.id,attrs:{closable:""},on:{close:function(a){t.delTag(e)}}},[a("span",{staticStyle:{cursotr:"pointer"},on:{click:function(a){t.updateTagName(e)}}},[t._v(t._s(e.name))])])})),t._v(" "),a("el-dialog",{attrs:{title:"修改标签",visible:t.showUpdateTagForm,width:"30%"},on:{"update:visible":function(e){t.showUpdateTagForm=e}}},[a("el-input",{attrs:{placeholder:"新标签名"},model:{value:t.curUpdateTag.name,callback:function(e){t.$set(t.curUpdateTag,"name",e)},expression:"curUpdateTag.name"}}),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.showUpdateTagForm=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.updateTag}},[t._v("确 定")])],1)],1)],1)])],1)],1),t._v(" "),a("div",{staticClass:"empty"})],1)},staticRenderFns:[]};var j=a("VU/8")(R,V,!1,function(t){a("utky")},"data-v-886e597c",null).exports,B={data:function(){return{showActList:[],curAct:[],actTotal:0,curType:1,friendsTotal:0,showFriends:[],user:{},showChatHistory:!1,loading:!1,chatHistory:[],chatTotal:0,chatHistoryLoading:!1,curfid:"",userTags:[],editForm:!1,editData:{},addTagForm:!1,tags:[],addTagId:1}},methods:v()({},Object(_.c)({setNavActive:"setNavActive",setCurBread:"setCurBread"}),{setFriendsPage:function(t){this.showFriends=[];for(var e=this.user.friends,a=10*(t-1),r=a+10,s=a;s<r;s++)e[s]&&this.showFriends.push(e[s])},showAct:function(t){1===t&&(this.curAct=this.user.myActivities),2===t&&(this.curAct=this.user.participatingActivities),3===t&&(this.curAct=this.user.subscribleActivities),this.setShowActPage(1),this.actTotal=this.curAct.length||0,this.curType=t},formatTimestemp:function(t){var e=new Date(t);return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()+" "+e.getHours()+":"+e.getMinutes()},setShowActPage:function(t){this.showActList=[];for(var e=this.curAct,a=20*(t-1),r=a+20,s=a;s<r;s++)e[s]&&this.showActList.push(e[s])},addTag:function(t){var e=this;return u()(c.a.mark(function t(){var a,r,s,i,n;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a="",r=!1,e.userTags.forEach(function(t){a+=t.id+",",t.id!==e.addTagId||(r=!0)}),!r){t.next=6;break}return e.$notify.error({title:"错误",message:"已经选择该标签"}),t.abrupt("return");case 6:return a+=e.addTagId+",",t.next=9,h("/activity-type/"+e.$route.params.id+"/put",{interest:a});case 9:if(s=t.sent,s.data,i=s.success,n=s.msg,!i){t.next=17;break}return e.$notify({title:"成功",message:n,type:"success"}),e.getUserTags(),t.abrupt("return");case 17:e.$notify.error({title:"错误",message:n});case 18:case"end":return t.stop()}},t,e)}))()},edit:function(){this.editData={id:this.$route.params.id,name:this.user.name,sex:this.user.sex,area:this.user.area,phone:this.user.phone,remark:this.user.remark,locked:this.user.lockedFlag},console.log(this.editData),this.editForm=!0},update:function(){var t=this;return u()(c.a.mark(function e(){var a,r,s;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.editData.locked=t.editData.lockedFlag?1:0,e.next=3,h("/admins/put",t.editData);case 3:if(a=e.sent,a.data,r=a.success,s=a.msg,!r){e.next=17;break}return t.user.name=t.editData.name,t.user.sex=t.editData.sex,t.user.area=t.editData.area,t.user.phone=t.editData.phone,t.user.remark=t.editData.remark,t.user.locked=t.editData.locked,t.user.lockedFlag=1===t.editData.locked,t.$notify({title:"成功",message:s,type:"success"}),e.abrupt("return");case 17:t.$notify.error({title:"错误",message:s});case 18:case"end":return e.stop()}},e,t)}))()},showUserChatHistory:function(t){this.curfid=t.id,this.getChatHistory(),this.showChatHistory=!0},setChatHistoryPage:function(t){this.getChatHistory(t)},getChatHistory:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return u()(c.a.mark(function a(){var r,s,i,n;return c.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t.chatHistoryLoading=!0,a.next=3,t.$http.get("/chattingrecord",{params:{pagenum:e,pagesize:20,uid:t.user.id,fid:t.curfid}});case 3:if(r=a.sent,s=r.data,i=s.success,n=s.data,s.msg,!i){a.next=13;break}return t.chatHistory=n.rows,t.chatTotal=n.total,t.chatHistoryLoading=!1,a.abrupt("return");case 13:t.chatHistory=[],t.chatTotal=0,t.chatHistoryLoading=!1;case 16:case"end":return a.stop()}},a,t)}))()},actDetail:function(t){this.$router.push("/backstage/actmgr/"+t)},getUserInfo:function(){var t=this;return u()(c.a.mark(function e(){var a,r,s,i;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.next=3,t.$http.get("/admins/"+t.$route.params.id);case 3:if(a=e.sent,r=a.data,s=r.success,i=r.data,r.msg,!s){e.next=15;break}return t.user=i,t.user.lockedFlag=0!==i.locked,t.loading=!1,t.setFriendsPage(1),t.friendsTotal=t.user.friends.length,e.abrupt("return");case 15:t.loading=!1;case 16:case"end":return e.stop()}},e,t)}))()},getUserTags:function(){var t=this;return u()(c.a.mark(function e(){var a,r,s,i;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$http.get("/activity-type/"+t.$route.params.id);case 2:if(a=e.sent,r=a.data,s=r.success,i=r.data,r.msg,!s){e.next=10;break}return t.userTags=i,e.abrupt("return");case 10:case"end":return e.stop()}},e,t)}))()},delUserTag:function(t){var e=this;return u()(c.a.mark(function a(){var r,s,i,n;return c.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return r="",e.userTags.forEach(function(t){r+=t.id+","}),r=r.replace(t.id+",",""),a.next=5,h("/activity-type/"+e.$route.params.id+"/put",{interest:r});case 5:if(s=a.sent,s.data,i=s.success,n=s.msg,!i){a.next=12;break}return e.userTags.forEach(function(a,r){a.id===t.id&&e.userTags.splice(r,1)}),a.abrupt("return");case 12:e.$notify.error({title:"错误",message:n});case 13:case"end":return a.stop()}},a,e)}))()},getAllTags:function(){var t=this;return u()(c.a.mark(function e(){var a,r,s,i;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$http.get("/activity-type");case 2:if(a=e.sent,r=a.data,s=r.data,i=r.msg,!r.success){e.next=10;break}return t.tags=s,e.abrupt("return");case 10:t.$notify.error({title:"错误",message:i});case 11:case"end":return e.stop()}},e,t)}))()}}),mounted:function(){var t=this;this.setNavActive("2"),this.setCurBread(I),this.getUserInfo(),this.getUserTags(),this.getAllTags(),this.timer=setInterval(function(){t.user.myActivities!==[]&&(t.showAct(1),clearInterval(t.timer))},500)}},E={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"userdetail"}},[a("div",{staticClass:"empty"}),t._v(" "),a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("个人信息")]),t._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{float:"right",cursor:"pointer"}},[a("span",{on:{click:t.edit}},[a("div",{staticClass:"fa fa-pencil"}),t._v(" 修改")])])]),t._v(" "),a("el-dialog",{attrs:{title:"修改",visible:t.editForm,width:"1000px"},on:{"update:visible":function(e){t.editForm=e}}},[a("el-form",{ref:"form",attrs:{model:t.editData,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"用户名"}},[a("el-input",{model:{value:t.editData.name,callback:function(e){t.$set(t.editData,"name",e)},expression:"editData.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"性别"}},[a("el-input",{model:{value:t.editData.sex,callback:function(e){t.$set(t.editData,"sex",e)},expression:"editData.sex"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"电话"}},[a("el-input",{model:{value:t.editData.phone,callback:function(e){t.$set(t.editData,"phone",e)},expression:"editData.phone"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"地区"}},[a("el-input",{model:{value:t.editData.area,callback:function(e){t.$set(t.editData,"area",e)},expression:"editData.area"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{model:{value:t.editData.remark,callback:function(e){t.$set(t.editData,"remark",e)},expression:"editData.remark"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"锁定"}},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:t.editData.locked,callback:function(e){t.$set(t.editData,"locked",e)},expression:"editData.locked"}})],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.editForm=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.update}},[t._v("确 定")])],1)],1),t._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[a("el-form",{staticClass:"usrinfo",attrs:{"label-position":"left",inline:""}},[a("el-form-item",{attrs:{label:"用户名","label-width":"90px"}},[a("span",[t._v(t._s(t.user.name))])]),t._v(" "),a("el-form-item",{attrs:{label:"性别","label-width":"90px"}},[a("span",[t._v(t._s(t.user.sex))])]),t._v(" "),a("el-form-item",{attrs:{label:"电话","label-width":"90px"}},[a("span",[t._v(t._s(t.user.phone))])]),t._v(" "),a("el-form-item",{attrs:{label:"地区","label-width":"90px"}},[a("span",[t._v(t._s(t.user.area))])]),t._v(" "),a("el-form-item",{attrs:{label:"备注","label-width":"90px"}},[a("span",[t._v(t._s(t.user.remark))])]),t._v(" "),a("el-form-item",{attrs:{label:"锁定","label-width":"90px"}},[a("span",[t._v(t._s(t.user.lockedFlag?"是":"否"))])])],1),t._v(" "),a("p"),t._v(" "),a("el-form",[a("el-form-item",{attrs:{label:"兴趣标签"}},[a("br"),t._v(" "),t._l(t.userTags,function(e){return a("el-tag",{key:e.id,attrs:{closable:""},on:{close:function(a){t.delUserTag(e)}}},[t._v("\n            "+t._s(e.name)+"\n          ")])}),t._v(" "),a("span",{staticStyle:{cursor:"pointer"}},[a("el-tag",[a("span",{on:{click:function(e){t.addTagForm=!0}}},[t._v("\n                添加\n              ")])])],1),t._v(" "),a("el-dialog",{attrs:{title:"添加标签",visible:t.addTagForm,width:"1000px"},on:{"update:visible":function(e){t.addTagForm=e}}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.addTagId,callback:function(e){t.addTagId=e},expression:"addTagId"}},t._l(t.tags,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.addTagForm=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.addTag}},[t._v("确 定")])],1)],1)],2)],1)],1)],1),t._v(" "),a("div",{staticClass:"empty"}),t._v(" "),a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-card",{staticClass:"box-card",attrs:{"body-style":"padding: 0;"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("好友列表")])]),t._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[a("el-table",{staticStyle:{width:"100%",border:"0 none",height:"568px"},attrs:{data:t.showFriends,border:""}},[a("el-table-column",{attrs:{prop:"name",label:"用户名"}}),t._v(" "),a("el-table-column",{attrs:{prop:"area",label:"年龄"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){t.showUserChatHistory(e.row)}}},[t._v("聊天记录")])]}}])})],1),t._v(" "),a("div",{staticClass:"block",staticStyle:{"text-align":"center"}},[a("el-pagination",{attrs:{"current-page":1,"page-size":20,layout:"total, prev, pager, next, jumper",total:t.friendsTotal},on:{"current-change":t.setFriendsPage}})],1),t._v(" "),a("el-dialog",{attrs:{title:"提示",visible:t.showChatHistory,width:"60%"},on:{"update:visible":function(e){t.showChatHistory=e}}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.chatHistoryLoading,expression:"chatHistoryLoading"}],staticStyle:{width:"100%"},attrs:{data:t.chatHistory,border:""}},[a("el-table-column",{attrs:{prop:"senderName",label:"发送者"}}),t._v(" "),a("el-table-column",{attrs:{label:"时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s(t.formatTimestemp(e.row.createtime))+"\n                  ")]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"content",label:"内容"}})],1),t._v(" "),a("div",{staticClass:"block",staticStyle:{"text-align":"center"}},[a("el-pagination",{attrs:{"current-page":1,"page-size":20,layout:"total, prev, pager, next, jumper",total:t.chatTotal},on:{"current-change":t.setChatHistoryPage}})],1)],1)],1)])],1)]),t._v(" "),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-card",{staticClass:"box-card",attrs:{"body-style":"padding: 0;"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("活动")]),t._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"actType",staticStyle:{float:"right"}},[a("span",{class:{active:1===this.curType},on:{click:function(e){t.showAct(1)}}},[t._v("创建的")]),t._v(" "),a("span",{class:{active:2===this.curType},on:{click:function(e){t.showAct(2)}}},[t._v("参加的")]),t._v(" "),a("span",{class:{active:3===this.curType},on:{click:function(e){t.showAct(3)}}},[t._v("约定的")])])]),t._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[a("el-table",{staticStyle:{width:"100%",border:"0 none",height:"568px"},attrs:{data:t.showActList,border:""}},[a("el-table-column",{attrs:{prop:"name",label:"活动名称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"typeName",label:"类型"}}),t._v(" "),a("el-table-column",{attrs:{prop:"area",label:"地区"}}),t._v(" "),a("el-table-column",{attrs:{prop:"max",label:"上限人数"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){t.actDetail(e.row.id)}}},[t._v("详情")])]}}])})],1),t._v(" "),a("div",{staticClass:"block",staticStyle:{"text-align":"center"}},[a("el-pagination",{attrs:{"current-page":1,"page-size":20,layout:"total, prev, pager, next, jumper",total:t.actTotal},on:{"current-change":t.setShowActPage}})],1)],1)])],1)])],1)],1)},staticRenderFns:[]};var M,Y=a("VU/8")(B,E,!1,function(t){a("AQDO")},"data-v-ede0ee12",null).exports,Q=a("bOdI"),W=a.n(Q),q={data:function(){return{showdm:!1,showVote:[],showRP:[],showSigns:[],showSubs:[],showLots:[],lotsTotal:0,rpTotal:0,voteTotal:0,signsTotal:0,subsTotal:0,actInfo:{},active:{},rpDetail:!1,currp:{},voteDetail:!1,votePersionDetail:!1,curvoteRecords:[],curvote:{},dm:[],dmTotal:0,dmloading:!1,loadingActData:!1,lotDetail:!1,curLotDetail:{},editForm:!1,editData:{},tags:[]}},methods:v()({},Object(_.c)({setNavActive:"setNavActive",setCurBread:"setCurBread"}),(M={update:function(){var t=this;return u()(c.a.mark(function e(){var a,r,s;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h("/activity/put",t.editData);case 2:if(a=e.sent,r=a.success,s=a.msg,a.data,!r){e.next=19;break}return t.actInfo.activityDO.name=t.editData.name,t.actInfo.activityDO.intro=t.editData.intro,t.actInfo.activityDO.area=t.editData.area,t.actInfo.activityDO.starttime=t.editData.s,t.actInfo.activityDO.endtime=t.editData.e,t.actInfo.activityDO.max=t.editData.max,t.actInfo.activityDO.remark=t.editData.remark,t.actInfo.activityDO.site=t.editData.site,t.actInfo.activityDO.typeid=t.editData.typeid,t.tags.forEach(function(e){e.id===t.editData.typeid&&(t.actInfo.activityDO.typename=t.editData.typename)}),t.$notify({title:"成功",message:s,type:"success"}),e.abrupt("return");case 19:t.$notify.error({title:"错误",message:s});case 20:case"end":return e.stop()}},e,t)}))()},formatTimestemp:function(t){var e=new Date(t);return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()+" "+e.getHours()+":"+e.getMinutes()},edit:function(){this.editData={id:this.actInfo.activityDO.id,uid:this.actInfo.activityDO.uid,name:this.actInfo.activityDO.name,intro:this.actInfo.activityDO.intro,area:this.actInfo.activityDO.area,s:this.formatTimestemp(this.actInfo.activityDO.starttime),e:this.formatTimestemp(this.actInfo.activityDO.endtime),max:this.actInfo.activityDO.max,remark:this.actInfo.activityDO.remark,site:this.actInfo.activityDO.site,typeid:this.actInfo.activityDO.typeid},this.editForm=!0},showLotDetail:function(t){this.curLotDetail=t,this.lotDetail=!0},setDMPage:function(t){this.getdm(t)},getdm:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return u()(c.a.mark(function a(){var r,s,i,n;return c.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t.dmloading=!0,a.next=3,t.$http.get("/chattingrecord/"+t.$route.params.id+"/barrage",{params:{pagenum:e,pagesize:20}});case 3:if(r=a.sent,s=r.data,i=s.success,n=s.data,s.msg,!i){a.next=13;break}return t.dm=n.rows,t.dmTotal=n.total,t.dmloading=!1,a.abrupt("return");case 13:t.dmloading=!1;case 14:case"end":return a.stop()}},a,t)}))()},dmShower:function(){0===this.dm.length&&this.getdm(),this.showdm=!0},lookVote:function(t){this.curvote=t,this.voteDetail=!0},showVotePerson:function(t){console.log(t),this.curvoteRecords=t.voteRecords,this.votePersionDetail=!0},lookRp:function(t){this.currp=t,this.rpDetail=!0},setLotsPage:function(t){this.showLots=[];for(var e=this.actInfo.lotteries,a=10*(t-1),r=a+10,s=a;s<r;s++)e[s]&&this.showLots.push(e[s])},setSignsPage:function(t){this.showSigns=[];for(var e=this.actInfo.signs,a=10*(t-1),r=a+10,s=a;s<r;s++)e[s]&&this.showSigns.push(e[s])},setSubsPage:function(t){this.showSubs=[];for(var e=this.actInfo.subscrible,a=10*(t-1),r=a+10,s=a;s<r;s++)e[s]&&this.showSubs.push(e[s])},setRPPage:function(t){this.showRP=[];for(var e=this.actInfo.redPackets,a=10*(t-1),r=a+10,s=a;s<r;s++)e[s]&&this.showRP.push(e[s])}},W()(M,"formatTimestemp",function(t){var e=new Date(t);return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()+" "+e.getHours()+":"+e.getMinutes()}),W()(M,"setVotePage",function(t){this.showVote=[];for(var e=this.actInfo.votes,a=10*(t-1),r=a+10,s=a;s<r;s++)e[s]&&this.showVote.push(e[s])}),W()(M,"getActInfo",function(){var t=this;return u()(c.a.mark(function e(){var a,r,s,i,n;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.loadingActData=!0,e.next=3,t.$http.get("/activity/"+t.$route.params.id);case 3:for(n in a=e.sent,r=a.data,s=r.success,i=r.data,r.msg,i)i[n]||(i[n]="");if(!s){e.next=24;break}return t.actInfo=i,t.active=i.activityDO,t.rpTotal=i.redPackets.length||0,t.voteTotal=i.votes.length||0,t.signsTotal=i.signs.length||0,t.subsTotal=i.subscrible.length||0,t.lotsTotal=i.lotteries.length||0,t.setRPPage(1),t.setVotePage(1),t.setSignsPage(1),t.setSubsPage(1),t.setLotsPage(1),t.loadingActData=!1,e.abrupt("return");case 24:t.loadingActData=!1;case 25:case"end":return e.stop()}},e,t)}))()}),W()(M,"getAllTags",function(){var t=this;return u()(c.a.mark(function e(){var a,r,s,i;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$http.get("/activity-type");case 2:a=e.sent,r=a.data,s=r.success,i=r.data,r.msg,s&&(t.tags=i);case 8:case"end":return e.stop()}},e,t)}))()}),M)),mounted:function(){this.setNavActive("1"),this.setCurBread(L),this.getActInfo(),this.getAllTags()}},G={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"act-detail"}},[a("div",{staticClass:"empty"}),t._v(" "),a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("活动详情")]),t._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingActData,expression:"loadingActData"}],staticStyle:{float:"right",cursor:"pointer"}},[a("span",{on:{click:t.edit}},[a("div",{staticClass:"fa fa-pencil"}),t._v(" 修改")])])]),t._v(" "),a("el-dialog",{attrs:{title:"修改",visible:t.editForm,width:"1000px"},on:{"update:visible":function(e){t.editForm=e}}},[a("el-form",{ref:"form",attrs:{model:t.editData,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"活动名"}},[a("el-input",{model:{value:t.editData.name,callback:function(e){t.$set(t.editData,"name",e)},expression:"editData.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"活动介绍"}},[a("el-input",{model:{value:t.editData.intro,callback:function(e){t.$set(t.editData,"intro",e)},expression:"editData.intro"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"地区"}},[a("el-input",{model:{value:t.editData.area,callback:function(e){t.$set(t.editData,"area",e)},expression:"editData.area"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"地址"}},[a("el-input",{model:{value:t.editData.site,callback:function(e){t.$set(t.editData,"site",e)},expression:"editData.site"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"开始时间"}},[a("el-date-picker",{attrs:{format:"yyyy-MM-dd HH:mm"},model:{value:t.editData.e,callback:function(e){t.$set(t.editData,"e",e)},expression:"editData.e"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"结束时间"}},[a("el-date-picker",{attrs:{format:"yyyy-MM-dd HH:mm"},model:{value:t.editData.e,callback:function(e){t.$set(t.editData,"e",e)},expression:"editData.e"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"最大人数"}},[a("el-input-number",{attrs:{min:1,max:1e7},model:{value:t.editData.max,callback:function(e){t.$set(t.editData,"max",e)},expression:"editData.max"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{model:{value:t.editData.remark,callback:function(e){t.$set(t.editData,"remark",e)},expression:"editData.remark"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"标签"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.editData.typeid,callback:function(e){t.$set(t.editData,"typeid",e)},expression:"editData.typeid"}},t._l(t.tags,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.editForm=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.update}},[t._v("确 定")])],1)],1),t._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingActData,expression:"loadingActData"}]},[a("el-button",{attrs:{type:"primary"},on:{click:t.dmShower}},[t._v("查看弹幕")]),t._v(" "),a("el-dialog",{attrs:{title:"弹幕",visible:t.showdm,width:"60%"},on:{"update:visible":function(e){t.showdm=e}}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.dmloading,expression:"dmloading"}],staticStyle:{width:"100%"},attrs:{data:t.dm,border:""}},[a("el-table-column",{attrs:{prop:"sender",label:"发送人"}}),t._v(" "),a("el-table-column",{attrs:{prop:"content",label:"内容"}}),t._v(" "),a("el-table-column",{attrs:{label:"时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n              "+t._s(t.formatTimestemp(e.row.createtime))+"\n            ")]}}])})],1),t._v(" "),a("div",{staticClass:"block",staticStyle:{"text-align":"center"}},[a("el-pagination",{attrs:{"current-page":1,"page-size":20,layout:"total, prev, pager, next, jumper",total:t.dmTotal},on:{"current-change":t.setDMPage}})],1)],1),t._v(" "),a("div",{staticStyle:{height:"1px","background-color":"#efefef","margin-top":"10px"}}),t._v(" "),a("el-form",{staticClass:"actinfo",attrs:{"label-position":"left",inline:""}},[a("el-form-item",{attrs:{label:"活动名称"}},[a("span",[t._v(t._s(t.active.name))])]),t._v(" "),a("el-form-item",{attrs:{label:"发起人"}},[a("span",[t._v(t._s(t.active.uid))])]),t._v(" "),a("el-form-item",{attrs:{label:"地区"}},[a("span",[t._v(t._s(t.active.area))])]),t._v(" "),a("el-form-item",{attrs:{label:"活动介绍"}},[a("span",[t._v(t._s(t.active.intro))])]),t._v(" "),a("el-form-item",{attrs:{label:"评分"}},[a("span",[t._v(t._s(t.actInfo.grade))])]),t._v(" "),a("el-form-item",{attrs:{label:"备注"}},[a("span",[t._v(t._s(t.active.remark))])]),t._v(" "),a("el-form-item",{attrs:{label:"人数"}},[a("span",[t._v(t._s(t.active.max))])]),t._v(" "),a("el-form-item",{attrs:{label:"活动类别"}},[a("span",[t._v(t._s(t.active.typename))])]),t._v(" "),a("el-form-item",{attrs:{label:"开始时间"}},[a("span",[t._v(t._s(t.formatTimestemp(t.active.starttime)))])]),t._v(" "),a("el-form-item",{attrs:{label:"结束时间"}},[a("span",[t._v(t._s(t.formatTimestemp(t.active.endtime)))])])],1)],1)],1),t._v(" "),a("div",{staticClass:"empty"}),t._v(" "),a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-card",{staticClass:"box-card",attrs:{"body-style":"padding: 0;"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("红包")])]),t._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingActData,expression:"loadingActData"}]},[a("el-table",{staticStyle:{width:"100%",border:"0 none",height:"568px"},attrs:{data:t.showRP,border:""}},[a("el-table-column",{attrs:{prop:"rptitle",label:"红包名"}}),t._v(" "),a("el-table-column",{attrs:{prop:"money",label:"总金额"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){t.lookRp(e.row)}}},[t._v("查看详情")])]}}])})],1),t._v(" "),a("el-dialog",{attrs:{title:"红包详情",visible:t.rpDetail,width:"1000px"},on:{"update:visible":function(e){t.rpDetail=e}}},[a("el-form",{staticClass:"actinfo",attrs:{"label-position":"left",inline:""}},[a("el-form-item",{attrs:{label:"红包标题"}},[a("span",[t._v(t._s(t.currp.rptitle))])]),t._v(" "),a("el-form-item",{attrs:{label:"红包金额"}},[a("span",[t._v(t._s(t.currp.money))])]),t._v(" "),a("el-form-item",{attrs:{label:"备注"}},[a("span",[t._v(t._s(t.currp.remark))])]),t._v(" "),a("el-form-item",{attrs:{label:"创建时间"}},[a("span",[t._v(t._s(t.formatTimestemp(t.currp.addtime)))])])],1),t._v(" "),a("h3",[t._v("抢红包详情")]),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.currp.redPacketRecords,border:""}},[a("el-table-column",{attrs:{label:"投票人"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("router-link",{attrs:{to:"/backstage/usermgr/"+e.row.uid}},[t._v(t._s(e.row.name))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"money",label:"金额"}}),t._v(" "),a("el-table-column",{attrs:{label:"时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s(t.formatTimestemp(e.row.addtime))+"\n                  ")]}}])})],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"})],1),t._v(" "),a("div",{staticClass:"block",staticStyle:{"text-align":"center"}},[a("el-pagination",{attrs:{"current-page":1,"page-size":10,layout:"total, prev, pager, next, jumper",total:t.rpTotal},on:{"current-change":t.setRPPage}})],1)],1)])],1)]),t._v(" "),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-card",{staticClass:"box-card",attrs:{"body-style":"padding: 0;"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("投票")])]),t._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingActData,expression:"loadingActData"}]},[a("el-table",{staticStyle:{width:"100%",border:"0 none",height:"568px"},attrs:{data:t.showVote,border:""}},[a("el-table-column",{attrs:{prop:"name",label:"投票名"}}),t._v(" "),a("el-table-column",{attrs:{prop:"multiselect",label:"多选"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){t.lookVote(e.row)}}},[t._v("查看详情")])]}}])})],1),t._v(" "),a("el-dialog",{attrs:{title:"红包详情",visible:t.voteDetail,width:"1000px"},on:{"update:visible":function(e){t.voteDetail=e}}},[a("el-form",{staticClass:"actinfo",attrs:{"label-position":"left",inline:""}},[a("el-form-item",{attrs:{label:"投票标题"}},[a("span",[t._v(t._s(t.curvote.name))])]),t._v(" "),a("el-form-item",{attrs:{label:"是否多选"}},[a("span",[t._v(t._s(t.curvote.multiselect))])]),t._v(" "),a("el-form-item",{attrs:{label:"备注"}},[a("span",[t._v(t._s(t.curvote.remark))])]),t._v(" "),a("el-form-item",{attrs:{label:"创建时间"}},[a("span",[t._v(t._s(t.formatTimestemp(t.curvote.addtime)))])])],1),t._v(" "),a("h3",[t._v("投票项目")]),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.curvote.voteGroups,border:""}},[a("el-table-column",{attrs:{prop:"name",label:"项目名"}}),t._v(" "),a("el-table-column",{attrs:{prop:"number",label:"投票人数"}}),t._v(" "),a("el-table-column",{attrs:{prop:"remark",label:"备注"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){t.showVotePerson(e.row)}}},[t._v("查看投票人")])]}}])})],1),t._v(" "),a("el-dialog",{attrs:{width:"1000px",title:"投票人",visible:t.votePersionDetail,"append-to-body":""},on:{"update:visible":function(e){t.votePersionDetail=e}}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.curvoteRecords,border:""}},[a("el-table-column",{attrs:{label:"用户名"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("router-link",{attrs:{to:"/backstage/usermgr/"+e.row.uid}},[t._v(t._s(e.row.name))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"sex",label:"性别",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"area",label:"地区"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"})],1),t._v(" "),a("div",{staticClass:"block",staticStyle:{"text-align":"center"}},[a("el-pagination",{attrs:{"current-page":1,"page-size":10,layout:"total, prev, pager, next, jumper",total:t.voteTotal},on:{"current-change":t.setVotePage}})],1)],1)])],1)])],1),t._v(" "),a("div",{staticClass:"empty"}),t._v(" "),a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-card",{staticClass:"box-card",attrs:{"body-style":"padding: 0;"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("签到的用户")])]),t._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingActData,expression:"loadingActData"}]},[a("el-table",{staticStyle:{width:"100%",border:"0 none",height:"568px"},attrs:{data:t.showSigns,border:""}},[a("el-table-column",{attrs:{label:"用户名"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("router-link",{attrs:{to:"/backstage/usermgr/"+e.row.id}},[t._v(t._s(e.row.name))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"area",label:"地区"}}),t._v(" "),a("el-table-column",{attrs:{prop:"sex",label:"性别"}}),t._v(" "),a("el-table-column",{attrs:{prop:"phone",label:"手机"}})],1),t._v(" "),a("div",{staticClass:"block",staticStyle:{"text-align":"center"}},[a("el-pagination",{attrs:{"current-page":1,"page-size":10,layout:"total, prev, pager, next, jumper",total:t.signsTotal},on:{"current-change":t.setSignsPage}})],1)],1)])],1)]),t._v(" "),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-card",{staticClass:"box-card",attrs:{"body-style":"padding: 0;"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("预约的用户")])]),t._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingActData,expression:"loadingActData"}]},[a("el-table",{staticStyle:{width:"100%",border:"0 none",height:"568px"},attrs:{data:t.showSubs,border:""}},[a("el-table-column",{attrs:{label:"用户名"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("router-link",{attrs:{to:"/backstage/usermgr/"+e.row.id}},[t._v(t._s(e.row.name))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"area",label:"地区"}}),t._v(" "),a("el-table-column",{attrs:{prop:"sex",label:"性别"}}),t._v(" "),a("el-table-column",{attrs:{prop:"phone",label:"手机"}})],1),t._v(" "),a("div",{staticClass:"block",staticStyle:{"text-align":"center"}},[a("el-pagination",{attrs:{"current-page":1,"page-size":10,layout:"total, prev, pager, next, jumper",total:t.subsTotal},on:{"current-change":t.setSubsPage}})],1)],1)])],1)])],1),t._v(" "),a("div",{staticClass:"empty"}),t._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-card",{staticClass:"box-card",attrs:{"body-style":"padding: 0;"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("抽奖记录")])]),t._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingActData,expression:"loadingActData"}]},[a("el-table",{staticStyle:{width:"100%",border:"0 none",height:"568px"},attrs:{data:t.showLots,border:""}},[a("el-table-column",{attrs:{prop:"name",label:"名称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"prizename",label:"奖品"}}),t._v(" "),a("el-table-column",{attrs:{label:"创建时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                "+t._s(t.formatTimestemp(e.row.addtime))+"\n              ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){t.showLotDetail(e.row)}}},[t._v("查看详情")])]}}])})],1),t._v(" "),a("el-dialog",{attrs:{width:"1000px",title:"抽奖详情",visible:t.lotDetail,"append-to-body":""},on:{"update:visible":function(e){t.lotDetail=e}}},[a("div",[a("el-form",{staticClass:"actinfo",attrs:{"label-position":"left",inline:""}},[a("el-form-item",{attrs:{label:"抽奖内容"}},[a("span",[t._v(t._s(t.curLotDetail.name))])]),t._v(" "),a("el-form-item",{attrs:{label:"奖品"}},[a("span",[t._v(t._s(t.curLotDetail.prizename))])]),t._v(" "),a("el-form-item",{attrs:{label:"参与人数"}},[a("span",[t._v(t._s(t.curLotDetail.number))])]),t._v(" "),a("el-form-item",{attrs:{label:"创建时间"}},[a("span",[t._v(t._s(t.formatTimestemp(t.curLotDetail.addtime)))])])],1)],1),t._v(" "),a("h3",[t._v("抽奖人")]),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.curLotDetail.lotteryRecords,border:""}},[a("el-table-column",{attrs:{label:"姓名"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("router-link",{attrs:{to:"/backstage/usermgr/"+e.row.id}},[t._v(t._s(e.row.name))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"area",label:"地区"}}),t._v(" "),a("el-table-column",{attrs:{prop:"sex",label:"性别"}})],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"})],1),t._v(" "),a("div",{staticClass:"block",staticStyle:{"text-align":"center"}},[a("el-pagination",{attrs:{"current-page":1,"page-size":10,layout:"total, prev, pager, next, jumper",total:t.lotsTotal},on:{"current-change":t.setLotsPage}})],1)],1)])],1)])],1)],1)},staticRenderFns:[]};var J=a("VU/8")(q,G,!1,function(t){a("I8Qr")},"data-v-4092c152",null).exports;s.default.use(o.a);var X=new o.a({routes:[{path:"/",redirect:"/login"},{path:"/login",name:"login",component:w},{path:"/backstage",name:"backstage",component:F,redirect:"/backstage/actmgr",children:[{path:"usermgr",component:z},{path:"actmgr",component:j},{path:"usermgr/:id",component:Y},{path:"actmgr/:id",component:J}]}]}),K=a("mUbh"),Z=function(t){return t.curNavActive},tt=function(t){return t.curBread},et=function(t){return t.usrName};a("sax8");s.default.use(_.a);var at=new _.a.Store({actions:K,getters:r,state:{curNavActive:"1",curBread:{},usrName:""},mutations:{setNavActive:function(t,e){t.curNavActive=e},setCurBread:function(t,e){t.curBread=e},setUsrName:function(t,e){t.usrName=e}},strict:!1,plugins:[]}),rt=a("zL8q"),st=a.n(rt);a("tvR6");s.default.use(st.a),s.default.config.productionTip=!1,s.default.prototype.$http=b.a,new s.default({el:"#app",router:X,store:at,render:function(t){return t(n)}})},NigV:function(t,e){},WYpt:function(t,e){},l9mT:function(t,e){},mUbh:function(t,e){},tvR6:function(t,e){},utky:function(t,e){},"vmb/":function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.ed991af7aeb34c3c7ce5.js.map